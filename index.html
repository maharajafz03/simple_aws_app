<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Management</title>
  <script src="https://cdn.tailwindcss.com"></script>     
  <!-- this is a tailwindcss framework -->
  <style>
    body {
      background: linear-gradient(135deg, rgba(255, 165, 0, 0.7), rgba(0, 0, 0, 0.9));
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px); /* for Safari */
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96"> <!-- Container for Input -->
    <h1 class="text-2xl font-bold mb-4 text-center">Employee Management</h1>
    
    <!-- Input Box for Employee Details -->
    <div class="mb-4">
      <h2 class="text-xl font-semibold mb-2">Add Employee</h2>
      <form id="employee-form" class="grid grid-cols-1 gap-2">
        <input type="text" id="employee-name" placeholder="Employee Name" class="p-2 border rounded-md" required>
        <input type="text" id="employee-role" placeholder="Role" class="p-2 border rounded-md" required>
        <input type="text" id="employee-department" placeholder="Department" class="p-2 border rounded-md" required>
        <input type="text" id="employee-contact" placeholder="Contact Number" class="p-2 border rounded-md" required>
        <button type="submit" class="bg-blue-500 text-white p-2 rounded-md mt-2 hover:bg-blue-600">Add Employee</button>
      </form>
    </div>
  </div>

  <!-- Box to Display Employee Details -->
  <div class="bg-white p-6 rounded-lg shadow-lg w-96 ml-4"> <!-- Container for Details -->
    <h2 class="text-xl font-semibold mb-2">Employee Details</h2>
    <form id="search-form" class="flex space-x-2"> <!-- Search Form -->
      <input type="text" id="search-name" placeholder="Enter Employee Name" class="p-2 border rounded-md flex-grow" required>
      <button type="submit" class="bg-green-500 text-white p-2 rounded-md hover:bg-green-600">Search</button>
    </form>
    
    <div id="search-result" class="mt-4 hidden"> <!-- Results Section -->
      <h3 class="text-lg font-semibold">Details:</h3>
      <ul class="list-disc pl-5">
        <li>Name: <span id="result-name"></span></li>
        <li>Department: <span id="result-department"></span></li>
        <li>Role: <span id="result-role"></span></li>
        <li>Contact Number: <span id="result-contact"></span></li>
      </ul>
    </div>
  </div>

  <script>
     
    const employeeForm = document.getElementById('employee-form');
    const searchForm = document.getElementById('search-form');
    const searchResult = document.getElementById('search-result');
    
    // Handle Add Employee
    employeeForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const name = document.getElementById('employee-name').value.trim();
      const role = document.getElementById('employee-role').value.trim();
      const department = document.getElementById('employee-department').value.trim();
      const contact = document.getElementById('employee-contact').value.trim();
      
      const response = await fetch('http://3.94.53.59:8080/add-employee', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, role, department, contact })
      });
      
      const result = await response.json();
      if (result.message) {
        alert('Employee added successfully');
        employeeForm.reset(); // Clear form fields after successful submission
      } else {
        alert('Error adding employee');
      }
    });

    // Handle Search Employee
    searchForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const searchName = document.getElementById('search-name').value.trim();
      
      const response = await fetch(`http://3.94.53.59:8080/search-employee/${searchName}`);
      const result = await response.json();
      
      if (result.employee) {
        document.getElementById('result-name').textContent = result.employee.name;
        document.getElementById('result-department').textContent = result.employee.department;
        document.getElementById('result-role').textContent = result.employee.role;
        document.getElementById('result-contact').textContent = result.employee.contact;
        
        searchResult.classList.remove('hidden');
      } else {
        alert('Employee not found');
        searchResult.classList.add('hidden');
      }
    });
  </script>
</body>
</html>
